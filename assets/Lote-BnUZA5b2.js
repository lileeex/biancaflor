import{a as O,g as E,r as i,u as J,_,b as x,j as e,s as k,c as $,d as P,e as z}from"./index-DnIkRolS.js";import{G as h}from"./Grid-IelTXcD1.js";import{T as b}from"./Typography-CfsH5zdM.js";import{u as re,P as H,a as I}from"./Button-BpD1F6SI.js";import{j as se,k as ie,M as ne,B as le,f as W,h as Z,I as ee,S as oe}from"./TextField-CfisxxK2.js";import{M as T}from"./MenuItem-Dl1BH1Ob.js";import"./useForkRef-_vsIMq9w.js";import"./Portal-7hzC-RGP.js";import"./listItemTextClasses-B0jihKPi.js";import"./dividerClasses-CbI3AfZu.js";function ce(t){return E("MuiDialog",t)}const Q=O("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),te=i.createContext({}),de=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],ue=k(le,{name:"MuiDialog",slot:"Backdrop",overrides:(t,a)=>a.backdrop})({zIndex:-1}),pe=t=>{const{classes:a,scroll:r,maxWidth:s,fullWidth:l,fullScreen:c}=t,u={root:["root"],container:["container",`scroll${P(r)}`],paper:["paper",`paperScroll${P(r)}`,`paperWidth${P(String(s))}`,l&&"paperFullWidth",c&&"paperFullScreen"]};return z(u,ce,a)},ge=k(ne,{name:"MuiDialog",slot:"Root",overridesResolver:(t,a)=>a.root})({"@media print":{position:"absolute !important"}}),he=k("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.container,a[`scroll${P(r.scroll)}`]]}})(({ownerState:t})=>x({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),xe=k(H,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.paper,a[`scrollPaper${P(r.scroll)}`],a[`paperWidth${P(String(r.maxWidth))}`],r.fullWidth&&a.paperFullWidth,r.fullScreen&&a.paperFullScreen]}})(({theme:t,ownerState:a})=>x({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},a.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},a.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!a.maxWidth&&{maxWidth:"calc(100% - 64px)"},a.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${Q.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},a.maxWidth&&a.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[a.maxWidth]}${t.breakpoints.unit}`,[`&.${Q.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[a.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},a.fullWidth&&{width:"calc(100% - 64px)"},a.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Q.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),me=i.forwardRef(function(a,r){const s=J({props:a,name:"MuiDialog"}),l=re(),c={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{"aria-describedby":u,"aria-labelledby":p,BackdropComponent:m,BackdropProps:j,children:N,className:B,disableEscapeKeyDown:f=!1,fullScreen:F=!1,fullWidth:R=!1,maxWidth:Y="sm",onBackdropClick:v,onClick:C,onClose:S,open:w,PaperComponent:X=H,PaperProps:L={},scroll:g="paper",TransitionComponent:y=se,transitionDuration:G=c,TransitionProps:K}=s,V=_(s,de),M=x({},s,{disableEscapeKeyDown:f,fullScreen:F,fullWidth:R,maxWidth:Y,scroll:g}),D=pe(M),A=i.useRef(),q=d=>{A.current=d.target===d.currentTarget},U=d=>{C&&C(d),A.current&&(A.current=null,v&&v(d),S&&S(d,"backdropClick"))},o=ie(p),n=i.useMemo(()=>({titleId:o}),[o]);return e.jsx(ge,x({className:$(D.root,B),closeAfterTransition:!0,components:{Backdrop:ue},componentsProps:{backdrop:x({transitionDuration:G,as:m},j)},disableEscapeKeyDown:f,onClose:S,open:w,ref:r,onClick:U,ownerState:M},V,{children:e.jsx(y,x({appear:!0,in:w,timeout:G,role:"presentation"},K,{children:e.jsx(he,{className:$(D.container),onMouseDown:q,ownerState:M,children:e.jsx(xe,x({as:X,elevation:24,role:"dialog","aria-describedby":u,"aria-labelledby":o},L,{className:$(D.paper,L.className),ownerState:M,children:e.jsx(te.Provider,{value:n,children:N})}))})}))}))});function be(t){return E("MuiDialogActions",t)}O("MuiDialogActions",["root","spacing"]);const fe=["className","disableSpacing"],ve=t=>{const{classes:a,disableSpacing:r}=t;return z({root:["root",!r&&"spacing"]},be,a)},je=k("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.root,!r.disableSpacing&&a.spacing]}})(({ownerState:t})=>x({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Ce=i.forwardRef(function(a,r){const s=J({props:a,name:"MuiDialogActions"}),{className:l,disableSpacing:c=!1}=s,u=_(s,fe),p=x({},s,{disableSpacing:c}),m=ve(p);return e.jsx(je,x({className:$(m.root,l),ownerState:p,ref:r},u))});function Se(t){return E("MuiDialogContent",t)}O("MuiDialogContent",["root","dividers"]);function ye(t){return E("MuiDialogTitle",t)}const De=O("MuiDialogTitle",["root"]),We=["className","dividers"],ke=t=>{const{classes:a,dividers:r}=t;return z({root:["root",r&&"dividers"]},Se,a)},Ne=k("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.root,r.dividers&&a.dividers]}})(({theme:t,ownerState:a})=>x({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},a.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${De.root} + &`]:{paddingTop:0}})),Le=i.forwardRef(function(a,r){const s=J({props:a,name:"MuiDialogContent"}),{className:l,dividers:c=!1}=s,u=_(s,We),p=x({},s,{dividers:c}),m=ke(p);return e.jsx(Ne,x({className:$(m.root,l),ownerState:p,ref:r},u))}),Me=["className","id"],$e=t=>{const{classes:a}=t;return z({root:["root"]},ye,a)},Pe=k(b,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,a)=>a.root})({padding:"16px 24px",flex:"0 0 auto"}),Be=i.forwardRef(function(a,r){const s=J({props:a,name:"MuiDialogTitle"}),{className:l,id:c}=s,u=_(s,Me),p=s,m=$e(p),{titleId:j=c}=i.useContext(te);return e.jsx(Pe,x({component:"h2",className:$(m.root,l),ownerState:p,ref:r,variant:"h6",id:c??j},u))}),Ee=()=>{const[t,a]=i.useState(""),[r,s]=i.useState(""),[l,c]=i.useState(""),[u,p]=i.useState(""),[m,j]=i.useState(""),[N,B]=i.useState(""),[f,F]=i.useState([]),[R,Y]=i.useState([]),[v,C]=i.useState([]),[S,w]=i.useState(!1),[X,L]=i.useState(!1),[g,y]=i.useState({codigo:"",nombre:"",fechaNacimiento:""});i.useEffect(()=>{const o=JSON.parse(localStorage.getItem("heladeros")||"[]");F(o);const n=JSON.parse(localStorage.getItem("sabores")||"[]");Y(n);const d=JSON.parse(localStorage.getItem("lotes")||"[]");C(d)},[]);const G=()=>{if(!t||!r||!l||!u||!m||!N)return;const o={codigoLote:t,litros:r,heladero:l,saborGelato:u,ingredientes:m,fecha:N},n=[...v,o];C(n),localStorage.setItem("lotes",JSON.stringify(n)),D()},K=()=>{const o=v.map(n=>n.codigoLote===t?{codigoLote:t,litros:r,heladero:l,saborGelato:u,ingredientes:m,fecha:N}:n);C(o),localStorage.setItem("lotes",JSON.stringify(o)),D()},V=o=>{const n=v.filter(d=>d.codigoLote!==o);C(n),localStorage.setItem("lotes",JSON.stringify(n)),D()},M=o=>{a(o.codigoLote),s(o.litros),c(o.heladero),p(o.saborGelato),j(o.ingredientes),B(o.fecha),w(!0)},D=()=>{a(""),s(""),c(""),p(""),j(""),B(""),w(!1)},A=()=>{if(!g.codigo||!g.nombre||!g.fechaNacimiento)return;const o={codigo:g.codigo,nombre:g.nombre,fechaNacimiento:g.fechaNacimiento},n=[...f,o];F(n),localStorage.setItem("heladeros",JSON.stringify(n)),y({codigo:"",nombre:"",fechaNacimiento:""}),L(!1)},q=()=>{y({codigo:"",nombre:"",fechaNacimiento:""}),L(!0)},U=()=>{L(!1)};return e.jsxs(h,{container:!0,spacing:3,sx:{padding:3},children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(b,{variant:"h4",gutterBottom:!0,sx:{textAlign:"center",fontWeight:"bold"},children:"Gestionar Lote"})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(H,{sx:{padding:3,borderRadius:2,boxShadow:3},children:[e.jsx(b,{variant:"h6",gutterBottom:!0,sx:{color:"#00796b",fontWeight:"bold"},children:"Añadir/Modificar Lote"}),e.jsx("form",{children:e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(W,{label:"Código del Lote",variant:"outlined",fullWidth:!0,value:t,onChange:o=>a(o.target.value),disabled:S})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(W,{label:"Litros a Producir",variant:"outlined",type:"number",fullWidth:!0,value:r,onChange:o=>s(o.target.value)})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(Z,{fullWidth:!0,children:[e.jsx(ee,{children:"Sabor Gelato"}),e.jsx(oe,{value:u,onChange:o=>p(o.target.value),disabled:R.length===0,children:R.length>0?R.map(o=>e.jsx(T,{value:o.nombreSabor,children:o.nombreSabor},o.codigoSabor)):e.jsx(T,{disabled:!0,children:"No hay sabores registrados"})})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(Z,{fullWidth:!0,children:[e.jsx(ee,{children:"Heladero"}),e.jsxs(oe,{value:l,onChange:o=>c(o.target.value),renderValue:o=>{if(!o)return e.jsx("em",{children:"Selecciona o agrega un heladero"});const n=f.find(d=>d.codigo===o);return n?n.nombre:o},children:[f.length>0?f.map(o=>e.jsx(T,{value:o.codigo,children:o.nombre},o.codigo)):e.jsx(T,{disabled:!0,children:"No hay heladeros registrados"}),e.jsx(T,{onClick:q,value:"",children:"➕ Agregar Heladero"})]})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(W,{label:"Ingredientes",variant:"outlined",fullWidth:!0,value:m,onChange:o=>j(o.target.value)})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(W,{label:"Fecha",variant:"outlined",type:"date",fullWidth:!0,value:N,onChange:o=>B(o.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(I,{variant:"contained",color:"primary",onClick:S?K:G,fullWidth:!0,sx:{backgroundColor:"#00796b","&:hover":{backgroundColor:"#004d40"},borderRadius:2,padding:"12px"},children:S?"Modificar Lote":"Insertar Lote"})})]})})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(H,{sx:{padding:3,borderRadius:2,boxShadow:3},children:[e.jsx(b,{variant:"h6",gutterBottom:!0,sx:{color:"#00796b",fontWeight:"bold"},children:"Lotes Guardados"}),e.jsx(h,{container:!0,spacing:2,children:v.length===0?e.jsx(b,{variant:"body1",sx:{width:"100%"},children:"No hay lotes guardados."}):v.map((o,n)=>{var d;return e.jsx(h,{item:!0,xs:12,children:e.jsxs(H,{sx:{padding:2,marginBottom:2,borderRadius:2,boxShadow:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx(b,{variant:"body1",children:`Código de Lote: ${o.codigoLote}`}),e.jsx(b,{variant:"body1",children:`Litros a Producir: ${o.litros}`}),e.jsx(b,{variant:"body1",children:`Sabor Gelato: ${o.saborGelato}`}),e.jsxs(b,{variant:"body1",children:[" ",`Heladero: ${((d=f.find(ae=>ae.codigo===o.heladero))==null?void 0:d.nombre)||o.heladero}`]}),e.jsx(b,{variant:"body1",children:`Ingredientes: ${o.ingredientes}`}),e.jsx(b,{variant:"body1",children:`Fecha: ${o.fecha}`})]}),e.jsxs("div",{children:[e.jsx(I,{color:"primary",onClick:()=>M(o),sx:{marginRight:1},children:"Modificar"}),e.jsx(I,{color:"error",onClick:()=>V(o.codigoLote),children:"Eliminar"})]})]})},n)})})]})}),e.jsxs(me,{open:X,onClose:U,children:[e.jsx(Be,{children:"Agregar Heladero"}),e.jsxs(Le,{children:[e.jsx(W,{label:"Código del Heladero",fullWidth:!0,value:g.codigo,onChange:o=>y({...g,codigo:o.target.value}),sx:{marginBottom:2}}),e.jsx(W,{label:"Nombre del Heladero",fullWidth:!0,value:g.nombre,onChange:o=>y({...g,nombre:o.target.value}),sx:{marginBottom:2}}),e.jsx(W,{label:"Fecha de Nacimiento",fullWidth:!0,type:"date",value:g.fechaNacimiento,onChange:o=>y({...g,fechaNacimiento:o.target.value}),InputLabelProps:{shrink:!0},sx:{marginBottom:2}})]}),e.jsxs(Ce,{children:[e.jsx(I,{onClick:U,color:"secondary",children:"Cancelar"}),e.jsx(I,{onClick:A,color:"primary",variant:"contained",children:"Agregar Heladero"})]})]})]})};export{Ee as default};

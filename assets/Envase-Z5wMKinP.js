import{r as o,j as t}from"./index-DnIkRolS.js";import{G as a}from"./Grid-IelTXcD1.js";import{T as n}from"./Typography-CfsH5zdM.js";import{P as I,a as P}from"./Button-BpD1F6SI.js";import{A as L}from"./Alert-CTdHQ_EP.js";import{f as u}from"./TextField-CfisxxK2.js";import{M as O}from"./MenuItem-Dl1BH1Ob.js";import"./useForkRef-_vsIMq9w.js";import"./useSlot-CCO6SuW7.js";import"./IconButton-7CARgz9E.js";import"./Portal-7hzC-RGP.js";import"./listItemTextClasses-B0jihKPi.js";import"./dividerClasses-CbI3AfZu.js";const r=s=>typeof s=="string"?s:"",ee=()=>{const[s,W]=o.useState(""),[p,x]=o.useState(""),[f,v]=o.useState(""),[j,g]=o.useState(""),[E,m]=o.useState(""),[S,h]=o.useState(""),[l,y]=o.useState([]),[A,$]=o.useState([]),[B,k]=o.useState([]),[C,G]=o.useState(!1),[J,c]=o.useState("");o.useEffect(()=>{y(JSON.parse(localStorage.getItem("envases")||"[]")),$(JSON.parse(localStorage.getItem("sabores")||"[]")),k(JSON.parse(localStorage.getItem("heladeros")||"[]"))},[]),o.useEffect(()=>{const e=l.find(i=>i.codigoEnvase===s);e?(x(r(e.nombreEnvase)),v(r(e.litrosPorEnvase)),g(r(e.saborGelato)),m(r(e.heladero)),h(r(e.cantidad)),G(!0),c("")):s&&(x(""),v(""),g(""),m(""),h(""),G(!1),c(""))},[s,l]);const w=()=>{if(c(""),!s||!p||!f||!j||!E||!S){c("Completa todos los campos.");return}if(C){const d=l.map(b=>b.codigoEnvase===s?{codigoEnvase:s,nombreEnvase:p,litrosPorEnvase:f,saborGelato:j,heladero:E,cantidad:S}:b);y(d),localStorage.setItem("envases",JSON.stringify(d)),N();return}if(l.some(d=>d.codigoEnvase===s)){c("No se pueden registrar dos envases con el mismo código.");return}const e={codigoEnvase:s,nombreEnvase:p,litrosPorEnvase:f,saborGelato:j,heladero:E,cantidad:S},i=[...l,e];y(i),localStorage.setItem("envases",JSON.stringify(i)),N()},M=e=>{W(r(e.codigoEnvase)),x(r(e.nombreEnvase)),v(r(e.litrosPorEnvase)),g(r(e.saborGelato)),m(r(e.heladero)),h(r(e.cantidad)),G(!0),c("")},H=e=>{const i=l.filter(d=>d.codigoEnvase!==e);y(i),localStorage.setItem("envases",JSON.stringify(i)),N()},N=()=>{W(""),x(""),v(""),g(""),m(""),h(""),G(!1),c("")};return t.jsxs(a,{container:!0,spacing:3,sx:{padding:3},children:[t.jsxs(a,{item:!0,xs:12,children:[t.jsx(n,{variant:"h4",gutterBottom:!0,sx:{textAlign:"center",fontWeight:"bold"},children:"Gestionar Envase"}),t.jsx(n,{variant:"subtitle1",gutterBottom:!0,sx:{textAlign:"center",color:"#555"},children:"Envase de Gelato"})]}),t.jsx(a,{item:!0,xs:12,children:t.jsxs(I,{sx:{padding:3,borderRadius:2,boxShadow:3},children:[t.jsx(n,{variant:"h6",gutterBottom:!0,sx:{color:"#00796b",fontWeight:"bold"},children:C?"Modificar Envase":"Registrar Envase"}),J&&t.jsx(L,{severity:"error",sx:{mb:2},children:J}),t.jsx("form",{onSubmit:e=>{e.preventDefault(),w()},children:t.jsxs(a,{container:!0,spacing:2,children:[t.jsx(a,{item:!0,xs:12,md:4,children:t.jsx(u,{label:"Código del Envase",variant:"outlined",fullWidth:!0,value:s,onChange:e=>W(e.target.value),inputProps:{maxLength:10}})}),t.jsx(a,{item:!0,xs:12,md:4,children:t.jsx(u,{label:"Nombre del Envase",variant:"outlined",fullWidth:!0,value:p,onChange:e=>x(e.target.value)})}),t.jsx(a,{item:!0,xs:12,md:4,children:t.jsx(u,{label:"Litros por Envase",variant:"outlined",type:"number",fullWidth:!0,value:f,onChange:e=>v(e.target.value),inputProps:{min:0}})}),t.jsx(a,{item:!0,xs:12,md:4,children:t.jsx(u,{select:!0,label:"Sabor Gelato",variant:"outlined",fullWidth:!0,value:j,onChange:e=>g(e.target.value),children:A.map(e=>t.jsx(O,{value:e.codigoSabor,children:e.nombreSabor},e.codigoSabor))})}),t.jsx(a,{item:!0,xs:12,md:4,children:t.jsx(u,{select:!0,label:"Heladero",variant:"outlined",fullWidth:!0,value:E,onChange:e=>m(e.target.value),children:B.map(e=>t.jsx(O,{value:e.codigo,children:e.nombre},e.codigo))})}),t.jsx(a,{item:!0,xs:12,md:4,children:t.jsx(u,{label:"Cantidad",variant:"outlined",type:"number",fullWidth:!0,value:S,onChange:e=>h(e.target.value),inputProps:{min:0}})}),t.jsxs(a,{item:!0,xs:12,children:[t.jsx(P,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,sx:{backgroundColor:"#00796b","&:hover":{backgroundColor:"#004d40"},borderRadius:2,padding:"12px"},children:C?"Modificar Envase":"Registrar Envase"}),C&&t.jsx(P,{variant:"outlined",color:"secondary",onClick:N,fullWidth:!0,sx:{mt:1},children:"Cancelar"})]})]})})]})}),t.jsx(a,{item:!0,xs:12,children:t.jsxs(I,{sx:{padding:3,borderRadius:2,boxShadow:3},children:[t.jsx(n,{variant:"h6",gutterBottom:!0,sx:{color:"#00796b",fontWeight:"bold"},children:"Envases Registrados"}),t.jsx(a,{container:!0,spacing:2,children:l.length===0?t.jsx(n,{variant:"body1",sx:{width:"100%"},children:"No hay envases registrados."}):l.map((e,i)=>{var d,b;return t.jsx(a,{item:!0,xs:12,children:t.jsxs(I,{sx:{padding:2,marginBottom:2,borderRadius:2,boxShadow:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{children:[t.jsx(n,{variant:"body1",children:`Código: ${r(e.codigoEnvase)}`}),t.jsx(n,{variant:"body1",children:`Nombre: ${r(e.nombreEnvase)}`}),t.jsx(n,{variant:"body1",children:`Litros por Envase: ${r(e.litrosPorEnvase)}`}),t.jsx(n,{variant:"body1",children:`Sabor Gelato: ${((d=A.find(R=>R.codigoSabor===e.saborGelato))==null?void 0:d.nombreSabor)||r(e.saborGelato)}`}),t.jsx(n,{variant:"body1",children:`Heladero: ${((b=B.find(R=>R.codigo===e.heladero))==null?void 0:b.nombre)||r(e.heladero)}`}),t.jsx(n,{variant:"body1",children:`Cantidad: ${r(e.cantidad)}`})]}),t.jsxs("div",{children:[t.jsx(P,{color:"primary",onClick:()=>M(e),sx:{marginRight:1},children:"Modificar"}),t.jsx(P,{color:"error",onClick:()=>H(r(e.codigoEnvase)),children:"Eliminar"})]})]})},i)})})]})})]})};export{ee as default};
